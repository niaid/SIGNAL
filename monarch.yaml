version: 1
name: triage
 
tech_email_addresses: jian.song@nih.gov,samuel.katz@nih.gov 
mgmt_email_addresses: jian.song@nih.gov,samuel.katz@nih.gov
fed_owner_email_address: jian.song@nih.gov
monarch_team_id: 5c8946358e735a001c5e1855
monarch_product_id: 5c8949c0197b90001c4b4a5a
 
docker_build:
  variables:
    IMAGE_REPO: lsb-triage
    REGISTRY_USER: songj11

webapp_scan:
  variables:
    NS_URL: 'https://triage.niaidawsqa.net/'

approved_for_prod: true

terraform:
  modules:
    - web-application
  module_name: triage # legacy, not needed for new apps
  variables:
    cpu: 512
    memory: 4096
    container_port: 8080 
    desired_count: 1
    command: /run.sh
    alert_recipients: "[[${var.tech_email_addresses},${var.mgmt_email_addresses}]]"
    healthcheck_timeout: 25
    healthcheck_healthy_threshold: 2
    healthcheck_unhealthy_threshold: 6
  environments:
    qa:
      variables:
        image: "[[${var.pre_prod_image_base}]]"
#         url_to_monitor: "triage.niaidawsqa.net"
    prod:
      variables:
        cpu: 128
        image: "[[${var.prod_image_base}]]"
        use_public_ssl_cert: true
        url_to_monitor: "triage.niaid.nih.gov"
        security_group_name: "external_elb"
